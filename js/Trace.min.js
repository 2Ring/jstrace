!function(a,b){"use strict";function c(b){!h||!p&&q&&q.log||h.apply(a,b)}function d(a){l.push(a),l.length>m&&l.shift()}function e(a,c){for(var d=j.length;d>=0;)!function(d){c[d]=function(){r.traceLevel(a)>r.Levels.off&&q!==b&&q[d]!==b&&q[d].apply(q,arguments)}}(j[d]),d-=1}function f(e,f){for(var g=i.length-1;g>0;)!function(g,h){f[g]=function(f,i){var j=[e,g];j=j.concat(Array.prototype.slice.call(arguments)),n&&d(j),c(j),q!==b&&r.shouldTrace(e,h)!==!1&&(q.firebug!==b?q[g].apply(a,j):q[g]!==b?q[g](j):q.log(j))}}(i[g],g),g-=1}function g(a){if(a===b)throw new Error("Level is undefined");if("string"==typeof a){var c=i.indexOf(a);if(-1===c)throw new Error(a+" is not a valid Trace Level");a=c}if(a<r.Levels.off||a>r.Levels.log)throw new Error("Trace level of "+a+" is not a valid value");return a}var h,i=["off","error","warn","info","debug","log"],j=["assert","clear","count","dir","dirxml","exception","group","groupCollapsed","groupEnd","profile","profileEnd","table","time","timeEnd","trace"],k={},l=[],m=1e3,n=!0,o=1,p=!1,q=a&&a.console,r=function(a,b){if(!(this instanceof r))throw new Error('Trace object must be initialised with the "new" keyword.');if("undefined"==typeof a)throw new Error("You must pass the module name");return e(a,this),f(a,this),this};r.defaultLevel=function(a){if(a===b)return o;if(null===a)throw new Error("null is an invalid trace level");o=g(a)},r.traceLevel=function(a,c,d){var e=Array.prototype.slice.call(arguments);if(a=e.shift(),c=b,d=!1,e.length>0&&("boolean"==typeof e[0]?d=e.shift():c=e.shift()),c===b){var f=k[a]!==b?k[a]:o;return d===!0?i[f]:f}k[a]=g(c)},r.shouldTrace=function(a,b){if("undefined"==typeof a||null===a)throw new Error("You must pass a module name");if("undefined"==typeof b||null===b)throw new Error("You must pass a level");var c="number"==typeof b?b:i.indexOf(b),d=!1;if(isNaN(c)===!0)throw new Error('"'+c+'" is not a valid Trace Level');var e=r.traceLevel(a);return d=e>=c},r.resetToDefault=function(a){if(a===b)k={};else{var c=typeof a;if("string"===c)for(var d=[].slice.call(arguments),e=0;e<d.length;e+=1)delete k[d[e]];else{if(!(a instanceof Array))throw new Error("Invalid type passed to resetToDefault: "+c);for(var f=0;f<a.length;f+=1){var g=a[f];delete k[g]}}}},r.setCallback=function(a,d,e){var f=Array.prototype.slice.call(arguments),g=l.length,i=b;if(f.length>0&&(i=f.shift(),"function"!=typeof i)){var j=new Error;throw j.message="Argument Is Not a function",j}h=i,p="boolean"==typeof f[0]?f.shift():!1;var k=g,m=g;for("number"==typeof f[0]&&(m=Math.max(f.shift(),0)),k-=m;g>k;)c(l[k]),k+=1},r.logLength=function(a){if("undefined"==typeof a)return m;if(isNaN(a)===!0)throw new Error("This is not a number:"+a);if(0>a)throw new Error("Maxium log length must be >= 0");m=a;var b=l.length-m;b>0&&(l=l.slice(b))},r.useHistoricalLog=function(a){return"undefined"==typeof a?n:void(n=a)},r.Levels=function(){for(var a={},b=i.length-1;b>=0;)a[i[b]]=b,b-=1;return a}(),r.config=function(a){if(a.defaultLevel&&r.defaultLevel(a.defaultLevel),a.logLength&&r.logLength(a.logLength),a.levels)for(var b in a.levels)a.levels.hasOwnProperty(b)&&r.traceLevel(b,a.levels[b])},"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=r:"function"==typeof define&&define.amd&&define("Trace",[],function(){return r}),a&&(a.Trace=r)}(this);